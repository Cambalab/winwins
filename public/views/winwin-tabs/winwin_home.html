<style>
   header {
   width: 100%;
   height: 280px;
   overflow: hidden;
   top: 0;
   left: 0;
   z-index: 99;
   -webkit-transition: height 0.4s;
   -moz-transition: height 0.4s;
   -ms-transition: height 0.4s;
   -o-transition: height 0.6s; 
   transition: height 0.6s;
   position:fixed;
   margin-top:280px;
   }
   header.smaller {
   height: 0px;
   }
</style>


<!--
   <div class="container">
      
       <div class="row"  ng-if="winwin.is_video">
           <div class="col-xs-12 no-padding">
               <header style="margin-top:55px;">
                   <div class="row">
                       <_iframe width="100%" height="280" src="{{getIframeSrc(winwin.video)}}" frameborder="0" ></iframe>
                   </div>
   
               </header>
   
           </div>
       </div>
   
   -->




<div class="container no-padding">
   <div  class="col-xs-12 no-padding">
      <div ng-if="!winwin.is_image" class="col-xs-12 no-padding card-panel teal" style="z-index:99;">
         <header class="white" style="margin-top:45px;  box-shadow: rgba(62, 55, 55, 0.42) 2px 2px 15px;">
            <div dynamic-background="" background-size="cover" background-image="http://images.dev-winwins.net/{{::winwin.image}}" class="responsive-img"style="min-height: 220px;
               padding-bottom:50px;">
               <div class="col-xs-10 col-xs-offset-2 center white-text ww-title" style="z-index:999;">
                  {{::winwin.title}}
                  <div ng-if="winwin.closing_date && !is_finished" style="font-size: 11px; font-family:montserrat; padding-top:10px;">
                     <i class="fa fa-clock-o" style="background-color: #F53430; border-radius:50%; width:12px; height:12px; padding:2px; "> </i> termina en <br> 
                     <span style="margin:2px; background-color:black; color:white;padding: 3px;padding-top:1px;padding-bottom:1px;margin:2px;">{{duration_days}}D</span> 
                     <span style="margin:3px;background-color:black; color:white;padding: 3px;padding-top:1px;padding-bottom:1px;">{{duration_hours}}H</span> 
                     <span style="margin:5px;background-color:black; color:white;padding: 3px;padding-top:1px;padding-bottom:1px;">{{duration_minutes}}"</span>
                  </div>
               </div>
            </div>
            <div style="margin-top:10px;margin-bottom:10px; ">
               <div class="col-xs-2" >    <span class="ww-social-fb-btn" socialshare 
                  socialshare-provider="facebook" 
                  socialshare-text="{{::winwin.title}}" 
                  socialshare-url="http://dev-winwins.net/ww/{{::winwin.id}}"  
                  socialshare-media="http://images.dev-winwins.net/{{::winwin.image}}"
                  socialshare-via="1082199191794840">
                  <i class="fa fa-facebook fa-inverse animated infinite pulse"></i>   </span> 
               </div>
               <div class="col-xs-2">    <span class="ww-social-tw-btn" socialshare socialshare-provider="twitter" socialshare-text="{{::winwin.title}}" socialshare-url="http://dev-winwins.net/ww/{{::winwin.id}}" > <i class="fa fa-twitter fa-inverse animated infinite pulse" ></i>   </span> </div>
               <div class="col-xs-2">    <span class="ww-social-mail-btn " ng-click="openMailModal(winwin)"> <i class="fa fa-envelope-o fa-inverse animated infinite pulse" ></i>   </span> </div>
               <div class="col-xs-3">
                  <div class="col-xs-4 ww-somos" style=" margin-left: -20px;">
                     <span class="lbl"style="width:55px;"> 
                     SOMOS 
                     </span> 
                     <div  style="background-color: #23AD85;
                        font-size: 17px;
                        font-family: montserrat;
                        min-width: 55px;
                        " class="animated  bounceInLeft">
                        {{::winwin.users_already_joined}}
                     </div>
                  </div>
                  </span> 
               </div>
               <div class="col-xs-3">
                  <div class="col-xs-4 ww-somos" style=" margin-left: -20px;">
                     <span class="lbl" style="width:55px;"> 
                     FALTAN 
                     </span> 
                     <div  style="background-color:  #FE7F01;
                        font-size: 17px;
                        font-family: montserrat;
                        width: 55px;
                        "class="animated  bounceInLeft"
                        >
                        {{::winwin.users_left}}
                     </div>
                  </div>
                  </span> 
               </div>
            </div>
         </header>
      </div>
   </div>
</div>




<!-- Winwin Text-->
<div class="container" style="text-align:center; margin-top: 290px;">
   <div class="col-xs-12">
      <span class="sisupieras">¿Si supieras que somos </span>
      <span class="somos-txt">{{::winwin.users_amount}} personas</span> 
      <div class="ww-text"> para {{::winwin.what_we_do}} </div>
      <span class="tesumarias"> te sumarías? </span>
   </div>
   <!-- Winwin More Details-->
   <div class="container">
      <div class="col-xs-3"></div>
      <div class="col-xs-6">  
         <button class="mas-detalles grey lighten-3 grey-text" type="button"  onclick="toggler('mas-detalles');">MAS DETALLES 
         <span class="caret"></span></button>
      </div>
      <div class="col-xs-3"></div>
   </div>
</div>
<div id="mas-detalles" style="display:none;">
   <!-- Details-->
   <div class="container">
         <div class="col-xs-12">
            <div class="detalles">
               {{::winwin.description}}
            </div>
         </div>
   </div>
   <!-- Winwin Attributes-->
   <div class="container">
      <div class="row" style="font-family: montserrat;
         font-size: 10px;
         text-align: center;
         padding: 15px;.
         padding-bottom:25px;
         background: rgb(247, 244, 244);
         box-shadow: 3px 3px 3px lightgrey;">
         <div class="col-xs-3 ww-attributte">Estado:<br><span ng-show="winwin.published" style="color:green;"><i class="fa fa-check" style="color: green;"></i> Activo </span><span ng-show="!winwin.published" style="color: red; font-family:montserrat;"><i class="fa fa-cross" style="color: red;"></i> Inactivo</span> </div>
         <div class="col-xs-3 ww-attributte">Escala:<br><i class="fa fa-globe" style="color: #1762C3;"></i> {{::winwin.scope}}</span> </div>
         <div class="col-xs-3 ww-attributte">Categoria:<br> Medio Ambiente</div>
         <!-- Button trigger modal -->
         <div class="col-xs-3 ww-attributte"> 
            <span style="text-align: center; color:#333;">
            <a style="color: #333;" type="button" data-toggle="modal" data-target="#myModal">
            Reportar <br> <i class="fa fa-exclamation-circle" style="color: red;"></i>WinWin </span> 
            </a>
         </div>
      </div>
      <div style="text-align:center; padding: 5px;" ng-if="!winwin.is_successful && winwin.already_joined" > 
         <span ng-click="left()" style="cursor: pointer; font-family: montserrat; font-size: 11px; background: #F7F4F4; color: #848181; padding: 5px; "><i class="fa fa-sign-out"></i> Abandonar WinWin</span>
      </div>
   </div>
</div>
<!-- Modal Report-->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
   <div class="modal-dialog" role="document">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel"><i class="fa fa-exclamation-circle" style="color: red;"></i> Reportar WinWin</h4>
         </div>
         <div class="modal-body">
            <textarea style="width:100%; border-radius:3px; height: 100px; font-family: montserrat;" placeholder="Describí los motivos de tu reporte..."> </textarea>
         </div>
         <div class="modal-footer">
            <button type="button" data-dismiss="modal" style="    background: green;
               color: white;
               font-family: montserrat;
               border: 0px;
               padding: 10px;">Cerrar</button>
            <button type="button" style="background: #C11C27;
               color: white;
               font-family: montserrat;
               border: 0px;
               padding: 10px;">Reportar</button>
         </div>
      </div>
   </div>
</div>
<div class="pad-20"></div>
<!-- Winwin CTA-->
<div class="container">
   <div ng-if="!winwin.is_successful && !isSponsor && !winwin.already_joined" class="container no-padding">
      <div class="col-xs-12">
         <div class="col-xs-9 btn-large green">
            <a href class="no-padding" ng-click="join()">
               <h6> <i class="fa fa-play animated infinite flash" style="font-size:14px; padding-top:5px;"></i> ¡SÍ! ME SUMO</h6>
            </a>
         </div>
         <div class="col-xs-3 btn-large grey lighten-4" data-toggle="modal" data-target="#share">
            <a href role="button" class="no-padding black-text" >
               <h6><i class="fa fa-bullhorn animated infinite pulse" style="font-size:14px; padding-top:5px;"></i></h6>
            </a>
         </div>
      </div>
   </div>
   <div class="row" ng-if="isSponsor">
      <div ng-if="winwin.already_sponsored" class="col-xs-10 col-xs-offset-2 text-center  btn-large green">
         <div class="no-padding">
            <h6><i class="fa fa-star"></i>SPONSOREAR ESTE WINWIN</h6>
         </div>
      </div>
      <div ng-hide="winwin.is_successful" >
      <div ng-if="!winwin.already_sponsored" class="col-xs-10 center btn-large green" style="cursor:pointer"  ng-click="askForSponsored()">
         <div class="no-padding">
            <h6> <i class="fa fa-star animated infinite flash"></i> SPONSOREAR WINWIN</h6>
         </div>
      </div>
        </div>
   </div>
</div>

<!-- Winwin Concretado Desaparecen los CTA me sumo, share  & solicitud de sponsoreo-->
<div ng-show="winwin.is_successful" >

<div class="col-xs-12 green" style="padding:15px;font-size:15px; color:white; text-align:center;"><i class="fa fa-check animated infinite wobble green-text" style="background: #fff; border-radius: 50%; padding: 20px; font-size: 40px;"> </i><br><h4> ¡WINWIN CONCRETADO!</h4>



<!-- Se activa la review del winwin-->
<div class="container center white black-text">
 <h6>   Califica el desempeño de este winwin:</h6>
  <input type="number" name="wwreview" id="review" class="rating" data-clearable=""/>
  <br>
</div>
</div>

<!-- Winwin People-->
<div class="container no-padding">
      <div class="col-xs-12 mb-20" style="background-color: #f1f1f1; padding: 10px 10px;      box-shadow: 0px 3px 5px lightgrey;  
         margin-top: 10px;">
         <div class="col-xs-2 no-padding" style="cursor: pointer;" ng-click="viewProfile(winwin.user.id)"> 
            <img ng-src="http://images.dev-winwins.net/45x45/{{::winwin.user.detail.photo}}" class="img-responsive img-circle profile-ww" style="border: 4px solid #1762C3; border-radius: 50%; margin-left:15px; line-height:17px;">
         </div>
         <div class="col-xs-3 no-padding" style="cursor: pointer;
            font-family: montserrat;
            font-size: 12px;
            margin-left: 18px;
            text-transform: capitalize;
            line-height: 12px;
            padding-top: 7px;" ng-click="viewProfile(winwin.user.id)"> {{::winwin.user.detail.name}} {{::winwin.user.detail.lastname}}</br><span style="color:#1762C3;font-size:10px; text-transform: uppercase;">creador</span> </div>
         <div class="col-xs-2 no-padding" style="cursor: pointer;" ng-repeat="member in winwin.users |filter: {pivot :{ creator: 0, moderator: 1}}"> 
            <img ng-src="http://images.dev-winwins.net/25x25/{{::member.photo}}" class="img-responsive img-circle profile-ww" style="border: 4px solid #1762C3; border-radius: 50%; margin-left:15px; line-height:17px;" ng-click="viewProfile(member.id)"  alt="{{::member.username}}" title="{{::member.username}}" >
         </div>
         <div class="col-xs-6">
            <div class="col-xs-1" ng-repeat="member in winwin.users">
               <img alt="{{::member.username}}" title="{{::member.usernamename}}" ng-src="http://images.dev-winwins.net/25x25/{{::member.photo}}" class="img-responsive img-circle"  ng-if="member.pivot.moderator == 1"  style="cursor: pointer" ng-click="viewProfile(member.id)"/>
            </div>
         </div>
      </div>


<!--Sponsors -->
   <div class="col-xs-12 no-padding" ng-if="winwin.active_sponsors.length">
        <span class="col-xs-12" style="margin-top:10px; margin-bottom: 10px; float: left; text-align: left;
        border-radius: 3px;"><i class="fa fa-star yellow-text" style="font-size: 10px;border-radius: 50%; padding:2px; background-color:#1976D2;"></i> <span style="color:#1976D2; font-size: 10px;">SPONSORS </span> </span>
          <div class="col-xs-3" ng-repeat="sponsor in winwin.active_sponsors">
             <img  ng-src="http://images.dev-winwins.net/x50/{{::sponsor.photo}}" ng-click="viewSponsor(sponsor.id)" title="{{::sponsor.name}}" alt="{{::sponsor.name}}" style="border-radius:2px;  float: left;
        border-radius: 3px;
        height: 100%;
        box-shadow: 2px 2px 3px #9DA09F;
        margin-bottom:10px;
        border: 3px solid #F1F1F1;" class="responsive-image">
          </div>
       </div>
    </div>
</div>
<div style="min-height:800px;">

   <!-- Winwin Activity Wall-->            
   <ng-include src="'views/winwin-tabs/wall_component.html'"></ng-include>
</div>

<script type="text/ng-template" id="myMailShare.html">

    <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">
            <div class="bubble-md create-title">
                <i class="fa fa-envelope-o"></i><br/>
                Invita amigos por mail.
            </div>
        </h4>
   </div>
   <div class="modal-body">
        <div class="container" ng-show="!success">
            <div class="row">
                <input type="email" placeholder="Ingresa mails para invitar" ng-model="current_mail" ng-enter="addMail()">
            </div>
            <div class="row" ng-repeat="mail in mails track by $index">
                <span class="col-xs-10">{{mail}}</span>
                <span class="col-xs-2" ng-click="removeMail(mail)">
                    <i class="fa fa-times"></i>
                </span>
            </div>
            <div class="row">
                <button type="button" ng-click="sentInvitations()"  class="btn-large green" style="width:100%;">
                   <i class="fa fa-paper-plane" style="font-size: 16px;"></i>   ENVIAR INVITACION!
               </button>
            </div>
           <!--h6 class="text-center">
               Ingresa las direcciones de las personas que quieres invitar
           </h6-->
       </div>
       <div class="container" ng-show="success">
           <div class="row">
               <div class="col-xs-2"></div>
               <div class="col-xs-8">
                   <div style="text-align: center;"> 
                       <i class="fa fa-check" style="background-color: #58BA57; color: #fff; width:100px; height: 100px; border-radius: 50%; font-size:5em; padding-top: 0px; text-align:center;"></i>
                      <h6 style="font-family: montserrat;"> Las invitaciones fueron enviadas!</h6>
                   </div>
               <div class="col-xs-2"></div>
           </div>
       </div>
   </div>


</script>


<script>
   function toggler(divId) {
       $("#" + divId).toggle();
   }
   $(function(){
       $(window).scroll(function() {  
           if($(document).scrollTop() > 150) {    
                $('#footer').addClass("show");
           } else {
               $('#footer').removeClass("show");
           }
       });
   })
   
   function init() {
       window.addEventListener('scroll', function(e){
           var distanceY = window.pageYOffset || document.documentElement.scrollTop,
               shrinkOn = 100,
               header = document.querySelector("header");
           if (distanceY > shrinkOn) {
               classie.add(header,"smaller");
           } else {
               if (classie.has(header,"smaller")) {
                   classie.remove(header,"smaller");
               }
           }
       });
   }
   window.onload = init();
</script>

<!-- Modal Sharer-->
<div class="modal fade" id="share" tabindex="-1" role="dialog" aria-labelledby="share" style="display:none;">
   <div class="modal-dialog" role="document">
      <div class="container center">
         <i class="fa fa-elipsis" style="font-size: 2rem;color:#3B5998;"></i>
         <i class="fa fa-bullhorn " style="font-size: 50px; background-color:  #3B5998; color: #FFF; padding: 20px; width:101%;"></i> 
         <i class="fa fa-caret-down " style="font-size: 3rem;margin-top:-23px; color:#3B5998;"></i>
      </div>
      <div class="container no-padding">
         <div class="col-xs-1 no-padding"></div>
         <div style="cursor:pointer; background-color:#3b5998; color:#fff;  margin-top:1px;margin-right:3px;"  class="col-xs-3 animated  wobble uploaders card-panel circle"  
            socialshare
            socialshare-provider="facebook" 
            socialshare-text="{{::winwin.title}}" 
            socialshare-url="http://dev-winwins.net/ww/{{::winwin.id}}"  
            socialshare-media="http://images.dev-winwins.net/{{::winwin.image}}"
            socialshare-via="1082199191794840">
            <i class="fa fa-facebook" style="padding-top:0px;" ></i><br>
         </div>
         <div style="cursor:pointer ;background-color:#1dcaff; color:#fff;margin:3px;"  class="col-xs-3  animated  wobble uploaders card-panel"  socialshare  socialshare-text="{{::winwin.title}}" socialshare-url="http://dev-winwins.net/ww/{{::winwin.id}}" socialshare-provider="twitter">
            <i class="fa fa-twitter" style="padding-top:0px;" ></i><br>
         </div>
         <div style="cursor:pointer;background-color:#EA4235; color:#fff; margin:3px;"  class="col-xs-3 animated  wobble uploaders card-panel"  
            socialshare 
            socialshare-provider="google+" 
            socialshare-text="{{::winwin.title}}" 
            socialshare-media="http://images.dev-winwins.net/{{::winwin.image}}"
            socialshare-url="http://dev-winwins.net/ww/{{::winwin.id}}">
            <i class="fa fa-google" style="padding-top:0px;"></i><br>
         </div>
         <div class="col-xs-12"><button type="button" class="btn-large green" style="width:100%;" data-dismiss="modal" >Listo </button></div>
      </div>
   </div>
</div> 
<script>
(function ($) {

  $.fn.rating = function () {

    var element;

    // A private function to highlight a star corresponding to a given value
    function _paintValue(ratingInput, value, active_icon, inactive_icon) {
      var selectedStar = $(ratingInput).find('[data-value="' + value + '"]');
      selectedStar.removeClass(inactive_icon).addClass(active_icon);
      selectedStar.prevAll('[data-value]').removeClass(inactive_icon).addClass(active_icon);
      selectedStar.nextAll('[data-value]').removeClass(active_icon).addClass(inactive_icon);
    }

    // A private function to remove the highlight for a selected rating
    function _clearValue(ratingInput, active_icon, inactive_icon) {
      var self = $(ratingInput);
      self.find('[data-value]').removeClass(active_icon).addClass(inactive_icon);
    }

    // A private function to change the actual value to the hidden field
    function _updateValue(input, val) {
      input.val(val).trigger('change');
      if (val === input.data('empty-value')) {
        input.siblings('.rating-clear').hide();
      } else {
        input.siblings('.rating-clear').show();
      }
    }


    // Iterate and transform all selected inputs
    for (element = this.length - 1; element >= 0; element--) {

      var el, i,
        originalInput = $(this[element]),
        max = originalInput.data('max') || 5,
        min = originalInput.data('min') || 0,
        def_val = originalInput.val() || 0,
        lib = originalInput.data('icon-lib') || 'glyphicon'
        active = originalInput.data('active-icon') || 'glyphicon-star',
        inactive = originalInput.data('inactive-icon') || 'glyphicon-star-empty',
        clearable = originalInput.data('clearable') || null,
        clearable_i = originalInput.data('clearable-icon') || 'glyphicon-remove',
        stars = '';

      // HTML element construction
      for (i = min; i <= max; i++) {
        // Create <max> empty stars
        if(i  <= def_val){
          stars += ['<i class="',lib, ' ', active, '" data-value="', i, '"></i>'].join('');
          }
        else{
            stars += ['<i class="',lib, ' ', inactive, '" data-value="', i, '"></i>'].join('')
            }
      }
      // Add a clear link if clearable option is set
      if (clearable) {
          stars += [
          ' <a class="rating-clear" style="display:none;" href="javascript:void">',
          '<span class="',lib,' ',clearable_i,'"></span> ',
          clearable,
          '</a>'].join('');
      }

      // Clone with data and events the original input to preserve any additional data and event bindings.
      var newInput = originalInput.clone(true)
        .addClass('hidden')
        .data('max', max)
        .data('min', min)
        .data('icon-lib', lib)
        .data('active-icon', active)
        .data('inactive-icon', inactive);

      // Rating widget is wrapped inside a div
      el = [
        '<div class="rating-input">',
        stars,
        '</div>'].join('');

      // Replace original inputs HTML with the new one
      if (originalInput.parents('.rating-input').length <= 0) {
        originalInput.replaceWith($(el).append(newInput));
      }

    }

    // Give live to the newly generated widgets
    $('.rating-input')
      // Highlight stars on hovering
      .on('mouseenter', '[data-value]', function () {
        var self = $(this);
         input = self.siblings('input');
        _paintValue(self.closest('.rating-input'), self.data('value'), input.data('active-icon'), input.data('inactive-icon'));
      })
      // View current value while mouse is out
      .on('mouseleave', '[data-value]', function () {
        var self = $(this),
          input = self.siblings('input'),
          val = input.val(),
          min = input.data('min'),
          max = input.data('max'),
          active = input.data('active-icon'),
          inactive = input.data('inactive-icon');
        if (val >= min && val <= max) {
          _paintValue(self.closest('.rating-input'), val, active, inactive);
        } else {
          _clearValue(self.closest('.rating-input'), active, inactive);
        }
      })
      // Set the selected value to the hidden field
      .on('click', '[data-value]', function (e) {
        var self = $(this),
          val = self.data('value'),
          input = self.siblings('input');
        _updateValue(input,val);
        e.preventDefault();
        return false;
      })
      // Remove value on clear
      .on('click', '.rating-clear', function (e) {
        var self = $(this),
          input = self.siblings('input'),
          active = input.data('active-icon'),
          inactive = input.data('inactive-icon');
        _updateValue(input, input.data('empty-value'));
        _clearValue(self.closest('.rating-input'), active, inactive);
        e.preventDefault();
        return false;
      })
      // Initialize view with default value
      .each(function () {
        var input = $(this).find('input'),
          val = input.val(),
          min = input.data('min'),
          max = input.data('max');
        if (val !== "" && +val >= min && +val <= max) {
          _paintValue(this, val);
          $(this).find('.rating-clear').show();
        }
        else {
          input.val(input.data('empty-value'));
          _clearValue(this);
        }
      });

  };

  // Auto apply conversion of number fields with class 'rating' into rating-fields
  $(function () {
    if ($('input.rating[type=number]').length > 0) {
      $('input.rating[type=number]').rating();
    }
  });

}(jQuery));

</script>