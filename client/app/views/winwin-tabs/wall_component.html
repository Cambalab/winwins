<!-- Winwin Activity Wall-->            
<div data-ng-controller="winwin-muro">
<!-- Winwin Poll-->
<div class="row" ng-repeat="poll in polls">
   <div class="col s12 m6" ng-show="!poll.data.has_answered">
      <div class="card white ">
         <div class="card-content black-text">
            <span class="card-title center">
               <h6>{{poll.question}}</h6>
            </span>
            <ul class="collection">
                <li class="collection-item dismissable black-text" ng-repeat="answer in poll.data.answers">
                    <div>
                        <span class="h7 grey-text"> {{answer.content}}</span>
                        <span class="secondary-content">
                            <input class="with-gap" name="poll_{{poll.id}}" type="radio" ng-value="answer.id" ng-checked="poll.selected_answer" ng-model="poll.selected_answer" ng-checked="true"/>
                            <label for="test5" ng-click="selectAnswer(poll, answer)"></label>
                        </span>
                    </div>

               </li>
            </ul>
         </div>
         <button class="btn-large green col-xs-12" ng-click="votePoll(poll)" >Votar</button>
      </div>
   </div>

   <div class="col s12 m6" ng-show="poll.data.has_answered">
      <div class="card white ">
         <div class="card-content black-text">
            <span class="card-title center">
               <h6>{{poll.question}}</h6>
            </span>
            <ul class="collection">
                <div ng-repeat="answer in poll.data.answers">
                    <div class="progress">
                        <div class="determinate" style="width: {{percentage_votes(poll, answer)}}%"></div>
                    </div>
                    <li class="collection-item dismissable black-text">
                        <div>
                            <span class="h7 grey-text"> {{answer.content}}</span>
                            <a href="#!" class="secondary-content">  
                                <span class="badge green white-text">{{answer.vote_count}}</span>
                            </a>
                        </div>
                    </li>
                </div>
            </ul>
         </div>
      </div>
   </div>


</div>
<div class="row">
   <div class="container no-padding" ng-repeat="item_post in posts" >
      <div class="col s12 m7">
         <div class="card white">
            <ul class="collection" style="width: 100%; height: 60px; border-color: transparent; border-bottom: 1px solid #f1f1f1;">
               <li class="collection-item avatar" style="width: 100%;">
                  <img ng-src="http://images.dev-winwins.net/38x38/{{item_post.user.photo}}" ng-click="viewProfile(winwin.user.id)" class="img-circle profile-ww" width="38" height="38"> 
                    <span class="h7 grey-text"> {{item_post.user.username}}</span>
                  <a class="button-del">
                     <h4><i class="fa fa-bookmark right grey-text" style="margin-top: -60px;"></i> </h4>
                     <h4><i class="fa fa-bookmark right orange-text" style="margin-top: -60px;"></i> </h4>
                  </a>
                  <a class="button-del">
                     <h4><i class="fa fa-trash-o right grey-text" style="margin-top: -30px;"></i> </h4>
                  </a>
                  <span class="title" style="font-size:12px;">Title</span>
               </li>
            </ul>
            <div class="post-content" style="padding: 10px;font-size: 12px; padding-top:0px;"> 
               {{::item_post.content}}
            </div>
            <div class="media-post"> </div>
            <div ng-show="item_post.media.type == 'IMAGE'" dynamic-background="" background-size="cover" background-image="http://images.dev-winwins.net/300x/{{::item_post.media.name}}" class="materialboxed embed-responsive embed-responsive-16by9" style="width:100%; min-margin-top:30px; margin-bottom:10px; background:linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0));"></div>
            <div ng-show="item_post.media.type == 'VIDEO'" class="embed-responsive embed-responsive-16by9" style="margin-top:30px;">
               <iframe class="embed-responsive-item" ng-src="{{getIframeSrc(item_post.media.path)}}" allowfullscreen=""></iframe>
            </div>
            <div class="card-action">
               <!-- Toolbar -->
               <div class="col-xs-12 no-padding">
                  <div class="col-xs-3 no-padding left"> <i class="fa fa-clock-o" ></i><span style="font-size: 8px;"> {{::item_post.created_at | moment: 'DD/MM/YYYY' }} </span></div>
                  <div ng-if="!isAuthenticated" class="col-xs-2 no-padding"> <i class="fa fa-thumbs-o-up"></i> <span class="post-likes"> {{::item_post.up_votes}}</span></div>
                  <div ng-if="!isAuthenticated" class="col-xs-3 no-padding"><i class="fa fa-thumbs-o-down" style="padding-top:2px;"></i><span class="post-likes-">0</span></div>
                  <div ng-if="isAuthenticated"class="col-xs-2 no-padding"  ng-class="{'text-danger': !item_post.self_vote.positive}"><i class="fa fa-thumbs-o-down" style="padding-top:2px; cursor:pointer;" ng-click="vote(item_post, false)"></i><span class="post-likes-"> {{::item_post.down_votes}}</span></div>
                  <div ng-if="isAuthenticated" class="col-xs-2 no-padding" ng-class="{'text-success': item_post.self_vote.positive}"> <i class="fa fa-thumbs-o-up"  style="cursor:pointer;" ng-click="vote(item_post, true)"></i> <span class="post-likes"> {{::item_post.up_votes}}</span></div>
                  <div class="col-xs-2"><span class="share-ico" ng-click="openSocialModal(item_post)"><i class="fa fa-share" style="padding-top:4px;"></i> </span></div>
                  <div ng-if="isAuthenticated" class="col-xs-2 no-padding" style="cursor:pointer;" ng-show="!item_post.isReplying" ><span class="comments-ico" ng-click="reply(item_post)"> <i class="fa fa-comment"></i></span></div>
                  <div ng-if="isAuthenticated" class="col-xs-2 no-padding" style="cursor:pointer;" ng-show="item_post.isReplying" ><span class="comments-ico" ng-click="cancelReply(item_post)"> <i class="fa fa-comment"></i></span></div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<div class="container no-padding" ng-repeat="comment in item_post.comments" >
   <div class="panel-body post">
      <div class="col-xs-11 col-xs-offset-1" style="background:white;">
         <div class="col-xs-12 no-padding">
            <div class="col-xs-2 no-padding right">    
               <img ng-src="http://images.dev-winwins.net/38x38/{{comment.user.photo}}" class="img-circle profile-ww" width="38" height="38" style="margin-top: 15px; margin-bottom: 10px; margin-right: 25px; border: 3px solid rgba(117, 114, 114, 0.59);" alt="user" />
            </div>
            <div class="p-lista" style="padding-bottom:10px;">
               <div style="padding-left: 20px; padding-right:15px;"> 
                  {{::comment.content}}
               </div>
               <div class="media-post"> </div>
               <div ng-show="comment.media.type == 'IMAGE'" dynamic-background="" background-size="cover" background-image="http://images.dev-winwins.net/220x/smart/{{::comment.media.name}}" style="height:240px; margin-top:10px; margin-bottom:10px; background:linear-gradient(rgba(0, 0, 0, 0.1), rgba(154, 148, 120, 0.0980392));" class="responsive-img"></div>
               <div ng-show="comment.media.type == 'VIDEO'" class="embed-responsive embed-responsive-16by9" max-height="240" style="margin-top:30px;">
                  <iframe class="embed-responsive-item" ng-src="{{getIframeSrc(comment.media.path)}}" allowfullscreen=""></iframe>
               </div>
               <div class="container buttons-post" style="background: white;">
                  <div class="container" style="margin-top: 10px;">
                     <div class="col-xs-12 no-padding">
                        <div class="col-xs-4 no-padding left"> <i class="fa fa-clock-o"style="font-size: 8px;"></i><span style="font-size: 8px;"> {{::comment.created_at | moment: 'DD/MM/YYYY' }} </span></div>
                        <div ng-if="!isAuthenticated" class="col-xs-2 no-padding"> <i class="fa fa-thumbs-o-up"></i> <span class="post-likes"> {{::comment.up_votes}}</span></div>
                        <div ng-if="!isAuthenticated" class="col-xs-2 no-padding"><i class="fa fa-thumbs-o-down" style="padding-top:2px;"></i><span class="post-likes-"> 10</span></div>
                        <div ng-if="isAuthenticated" lass="col-xs-2 no-padding"  ng-class="{'text-danger': !comment.self_vote.positive}"><i class="fa fa-thumbs-o-down" style="padding-top:2px; ursor:pointer;" ng-click="vote(comment, false)"></i><span class="post-likes-"> {{::comment.down_votes}}</span></div>
                        <div ng-if="isAuthenticated" class="col-xs-2" ng-class="{'text-success': comment.self_vote.positive}"> <i class="fa fa-thumbs-o-up"  style="cursor:pointer;" ng-click="vote(comment, true)"></i> <span class="post-likes"> {{::comment.up_votes}}</span></div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<div id="footer" ng-class="{'with_media': post.media_type}">
   <div class="container comments-box" >
      <div class="row no-padding">
         <div class="container" ng-show="post.media_type">
            <div ng-show="uploading" class="col-xs-12">
               <img class="img-responsive" ng-show="uploading" src="/images/loading.gif" style="height:auto;width:auto;padding:30px"/>
            </div>
            <div ng-show="post.media_type == 'IMAGE'" dynamic-background="" background-size="cover" background-image="http://images.dev-winwins.net/190x/{{::post.media_path}}" style="height:190px;">
            </div>
            <div ng-show="post.media_type == 'VIDEO'" class="embed-responsive embed-responsive-16by9" style="margin-top:30px;">
               <iframe class="embed-responsive-item" ng-src="{{getIframeSrc(post.media_path)}}" allowfullscreen="true"></iframe>
            </div>
         </div>
      </div>
      <div class="col-xs-2 post-image">
         <img ng-src="http://images.dev-winwins.net/38x38/{{profile.photo}}" class="img-circle profile-ww" width="38" height="38">
      </div>
      <div class="col-xs-6 no-padding">
         <div class="bubbles">
            <textarea class="postbox no-padding" placeholder="Postear acá" rows="4" ng-model="post.content" ng-required="true" ng-focus="max_size()" > </textarea>
         </div>
      </div>
      <span class="col-xs-2 button-send" ng-disabled="sendingPost" ng-click="submitPost()"><i class="fa fa-paper-plane" style="margin-left: -3px;"></i></span>
      <span class="col-xs-1 upload-post" ng-click="setVideoUrl()"><i class="fa fa-youtube"></i></span>
      <button type="file" class="col-xs-1 upload-post" ngf-select="uploadFiles($file)" accept="image/*" ngf-max-size="8MB"><i class="fa fa-camera-retro"></i></button>
   </div>
</div>
<script type="text/ng-template" id="postShareModal.html">
   <div class="container center">
   
        <i class="fa fa-elipsis" style="font-size: 2rem;color:#3B5998;"></i>
        <i class="fa fa-bullhorn " style="font-size: 50px; background-color:  #3B5998; color: #FFF; padding: 20px; width:101%;"></i> 
        <i class="fa fa-caret-down " style="font-size: 3rem;margin-top:-23px; color:#3B5998;"></i>
    </div>
   
     <div class="container no-padding">
        <div class="col-xs-1 no-padding"></div>
        <div style="cursor:pointer; background-color:#3b5998; color:#fff;  margin-top:1px;margin-right:3px;"  class="col-xs-3 animated  wobble uploaders card-panel circle"  
            socialshare
            socialshare-provider="facebook" 
            socialshare-text="{{::toShare.content}}" 
            socialshare-url="http://dev-winwins.net/ww-post/{{::toShare.id}}"  
            socialshare-media="http://images.dev-winwins.net/{{::toShare.media.name}}"
            socialshare-via="1082199191794840">
            <i class="fa fa-facebook" style="padding-top:0px;" ></i><br>
        </div>
        <div style="cursor:pointer ;background-color:#1dcaff; color:#fff;margin:3px;"  class="col-xs-3  animated  wobble uploaders card-panel"  
            socialshare  
            socialshare-text="{{::toShare.content}}" 
            socialshare-url="http://dev-winwins.net/ww-post/{{::toShare.id}}" 
            socialshare-provider="twitter">
            <i class="fa fa-twitter" style="padding-top:0px;" ></i><br>
        </div>
        <div style="cursor:pointer;background-color:#EA4235; color:#fff; margin:3px;"  class="col-xs-3 animated  wobble uploaders card-panel"  
            socialshare 
            socialshare-provider="google+" 
            socialshare-text="{{::toShare.content}}" 
            socialshare-media="http://images.dev-winwins.net/{{::toShare.media.name}}"
            socialshare-url="http://dev-winwins.net/ww-post/{{::toShare.id}}">
   
            <i class="fa fa-google" style="padding-top:0px;"></i><br>
        </div>
    </div>
   
   
   
</script>
<script type="text/ng-template" id="commentModal.html">
   <div class="container center">
   </div>
   <div class="container" ng-show="comment.media_type">
   <div ng-show="uploading" style="height:190px;">
   <img class="img-responsive col-xs-12" ng-show="uploading" src="/images/loading.gif" height="75" style="padding:30px"/>
   </div>
   <div ng-show="comment.media_type == 'IMAGE'" dynamic-background="" background-size="cover" background-image="http://images.dev-winwins.net/190x/{{::comment.media_path}}" style="height:190px;">
   </div>
   <div ng-show="comment.media_type == 'VIDEO'" class="embed-responsive embed-responsive-16by9">
   <iframe class="embed-responsive-item" ng-src="{{getIframeSrc(comment.media_path)}}" allowfullscreen="true"></iframe>
   </div>
   </div>
   <div ng-show="comment.media_type == 'IMAGE'" dynamic-background="" background-size="cover" background-image="http://images.dev-winwins.net/190x/{{::comment.media_path}}" style="height:190px;">
   </div>
   <div ng-show="comment.media_type == 'VIDEO'" class="embed-responsive embed-responsive-16by9">
   <iframe class="embed-responsive-item" ng-src="{{getIframeSrc(comment.media_path)}}" allowfullscreen=""></iframe>
   </div>
   </div>
   <div class="container">
   <div class="col-xs-12 no-padding">
   <textarea class="materialize-textarea" style="border:1px solid lightgrey;" placeholder="Comentá acá" rows="8" ng-model="comment.content" ></textarea>
   </div>
   </div>
   <div class="container no-padding" style="margin-bottom:-10px;">
   <div class="col-xs-12"> 
   <a  role="button" class="col-xs-6 btn-large green" style="width:100%;" ng-disabled="sendingPost" ng-click="submitComment()"><i class="fa fa-paper-plane animated infinite wobble"></i></a></div><br>
   <div class="col-xs-2 card-panel"> <a  role="button" class="col-xs-2 upload-post center"  ng-click="setVideoUrl()"><i class="fa fa-youtube"  style="font-size:1.5em;"></i></a></div>
   <div class="col-xs-2 card-panel">    <a  role="button" class="col-xs-2 upload-post center"  ngf-select="uploadFiles($file)" accept="image/*" ngf-max-size="8MB"><i class="fa fa-camera-retro" style="font-size:1.5em;"></i></a></div>
   </div>
</script>
<script>
   $(document).ready(function(){
   $('.materialboxed').materialbox();
   });
</script>
